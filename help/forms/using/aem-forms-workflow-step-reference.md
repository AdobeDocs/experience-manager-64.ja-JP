---
title: OSGi 上の Forms 中心のワークフロー - ステップリファレンス
seo-title: Forms-centric workflow on OSGi - Step Reference
description: OSGi ステップ上のForms中心のワークフローを使用すると、アダプティブフォームベースのワークフローを迅速に構築できます。
seo-description: Forms-centric workflow on OSGi steps allow you rapidly build adaptive forms based workflows.
uuid: 57c872d6-c6ca-4f78-a98c-f9487f1d673c
contentOwner: AEM Docs
discoiquuid: f2bd4d96-55a5-4fbd-bede-1747c2ec63c8
exl-id: f8e25989-6ed3-4b35-95e5-fbfd7c51d622
source-git-commit: c5b816d74c6f02f85476d16868844f39b4c47996
workflow-type: tm+mt
source-wordcount: '4673'
ht-degree: 43%

---

# OSGi 上の Forms 中心のワークフロー - ステップリファレンス {#forms-centric-workflow-on-osgi-step-reference}

>[!CAUTION]
>
>AEM 6.4 の拡張サポートは終了し、このドキュメントは更新されなくなりました。 詳細は、 [技術サポート期間](https://helpx.adobe.com/jp/support/programs/eol-matrix.html). サポートされているバージョンを見つける [ここ](https://experienceleague.adobe.com/docs/?lang=ja).

## Forms のワークフローステップ {#forms-workflow-steps}

Formsのワークフローステップは、AEMワークフローでAEM Forms固有の操作を実行します。 これらのステップを使用すると、OSGi でアダプティブフォームをベースとした Forms 中心型ワークフローを迅速に構築できます。これらのワークフローは、基本的なレビューおよび承認ワークフロー、内部およびファイアウォールをまたいだビジネスプロセスの開発に使用できます。 また、Forms Workflow手順を使用して、Document Services を開始し、Acrobat Sign署名ワークフローと統合し、その他のAEM Forms操作を実行することもできます。 これらのステップをワークフローで使用するには、[AEM Forms アドオン](https://www.adobe.com/go/learn_aemforms_documentation_63_jp)が必要です。

## タスクを割り当てステップ {#assign-task-step}

タスクの割り当て手順では、タスクを作成し、ユーザーまたはグループに割り当てます。 タスクの割り当てと共に、コンポーネントは、タスクのアダプティブフォームまたは非インタラクティブPDFも指定します。 アダプティブフォームはユーザーからの入力を受け付けるために必要であり、非インタラクティブ PDF または読み取り専用のアダプティブフォームはレビュー専用のワークフローに使用されます。

このコンポーネントを使用すると、タスクの動作を制御することもできます。例えば、レコードの自動ドキュメントの作成、特定のユーザーまたはグループへのタスクの割り当て、送信されたデータのパスの指定、事前入力されるデータのパスの指定、デフォルトのアクションの指定などです。 タスクを割り当てステップには、次のプロパティがあります。

* **タイトル：** タスクのタイトル。 タイトルは AEM インボックスに表示されます。
* **説明：** タスクで実行される操作の説明。 この情報は、共有開発環境で作業している場合に他のプロセス開発者にとって有用です。

* **サムネールのパス：** タスクサムネールのパス。 パスが指定されていない場合、アダプティブフォームのデフォルトのサムネールが表示され、レコードのドキュメントの場合はデフォルトのアイコンが表示されます。
* **ワークフローステージ：** 1 つのワークフローに複数のステージを含めることができます。これらのステージは、AEM インボックスに表示されます。これらのステージは、モデルのプロパティ（サイドキック／ページ／ページのプロパティ／ステージ）で定義できます。
* **優先度：**&#x200B;選択した優先度が AEM インボックスに表示されます。「高」、「中」、「低」の各オプションを使用できます。 デフォルト値は Medium です。
* **期限：** タスクが期限切れとマークされるまでの日数または時間数を指定します。 次を選択した場合、 **オフ**&#x200B;に設定されていない場合、タスクは期限切れとマークされません。 また、タスクが期限切れになった後に特定のタスクを実行するタイムアウトハンドラーを指定することもできます。

* **日：**&#x200B;タスクを完了するまでの日数。日数は、タスクがユーザーに割り当てられた後にカウントされます。 タスクが完了せず、「日数」フィールドで指定された日数を超えた場合、タイムアウトハンドラーが期限後にトリガーされます。
* **時間：** タスクを完了するまでの時間数。 時間数は、タスクがユーザーに割り当てられた後にカウントされます。 タスクが完了せず、「時間」フィールドで指定された時間数を超えた場合、タイムアウトハンドラーが期限の時間後にトリガーされます。
* **期限後にタイムアウト：**&#x200B;このオプションを選択して、タイムアウトハンドラー選択フィールドを有効にします。
* **タイムアウトハンドラー：**&#x200B;タスクを割り当てステップが期限切れになったときに実行するスクリプトを選択します。CRX リポジトリ（[apps]/fd/dashboard/scripts/timeoutHandler）にあるスクリプトを選択できます。指定されたパスは crx リポジトリに存在しません。管理者は、パスを使用する前に作成します。
* **タスクの詳細で最後のタスクのアクションとコメントを強調表示する：**&#x200B;タスクの詳細セクションで最後に実行されたアクションと受け取ったコメントを表示するには、このオプションを選択します。
* **タイプ：**&#x200B;ワークフローの開始時に入力するドキュメントのタイプを選択します。アダプティブフォーム、読み取り専用アダプティブフォーム、非インタラクティブPDFドキュメントを選択できます。
* **アダプティブフォームを使用**：入力されたアダプティブフォームを検索する方法を指定します。アダプティブフォームは、絶対パスで使用できる場合、ワークフローへのペイロードとして送信される場合、または変数を使用して計算されたパスで使用できる場合に使用できます。 パスを指定するには、String 型の変数を使用します。
* **アダプティブフォームのパス**：アダプティブフォームのパスを指定します。このフィールドは、「タイプ」フィールドのアダプティブフォームまたは読み取り専用アダプティブフォームオプションを、「アダプティブフォームを使用」フィールドの絶対パスオプションと組み合わせて使用すると使用できます。
* **PDFパス：** 非インタラクティブPDFドキュメントのパスを指定します。 このフィールドは、「タイプ」フィールドで非インタラクティブ PDF ドキュメントを選択した場合に使用できます。必ずペイロードに対する相対パスを指定します。例えば、[Payload_Directory]/Workflow/PDF/credit-card.pdf となります。このパスは crx リポジトリに存在しません。管理者は、パスを使用する前に作成します。 「レコードのドキュメント」オプションを有効にするか、「PDFパス」オプションを使用するには、フォームテンプレートベースのアダプティブフォームが必要です。
* **完了したタスクの場合は、アダプティブフォームを次のようにレンダリングします。**:タスクが完了とマークされると、アダプティブフォームを読み取り専用のアダプティブフォームまたはPDFドキュメントとしてレンダリングできます。 「レコードのドキュメント」オプションを有効にするか、アダプティブフォームをレコードのドキュメントとしてレンダリングするフォームテンプレートベースのアダプティブフォームが必要です。
* **事前入力する情報：** 以下に示すフィールドは、タスクへの入力として機能します。

   * **データファイルのパス：** 入力データファイルのパス（.json または.xml）。 必ずペイロードに対する相対パスを指定します。例えば、ファイルには、AEM インボックスアプリケーションを介してフォームに送信されるデータが含まれています。一例として、[Payload_Directory]/workflow/data というパスを指定します。
   * **添付ファイルのパス：** この場所で使用可能な添付ファイルは、タスクに関連付けられたフォームに添付されます。 必ずペイロードに対する相対パスを指定します。一例として、[Payload_Directory]/attachments/ というパスを指定します。

* **送信される情報：**&#x200B;以下のフィールドは、タスクの出力先として使用できます。

   * **データファイルのパス：** データファイルのパス（.json または.xml）。 このデータファイルには、関連付けられたフォームを介して送信された情報が含まれます。必ずペイロードに対する相対パスを指定します。例えば、[Payload_Directory]/Workflow/data のように指定します。ここで、data はファイルです。
   * **添付ファイルのパス：** タスクに指定されたフォームの添付ファイルを保存するパス。
   * **レコードのドキュメントのパス：** レコードのドキュメントファイルを保存するパス。 例えば、[Payload_Directory]/DocumentofRecord/credit-card.pdf のように指定します。パスフィールドが空の場合、レコードのドキュメントは生成されません。 必ずペイロードに対する相対パスを指定します。

* **割り当てオプション：** タスクをユーザーに割り当てる方法を指定します。 参加者選択スクリプトを使用してタスクを動的にユーザーまたはグループに割り当てることも、タスクを特定の AEM ユーザーまたはグループに割り当てることもできます。
* **参加者選択：** このオプションは、 **ユーザーまたはグループに対して動的に** 「割り当てオプション」フィールドでオプションが選択されている。 ECMAScript またはサービスを使用して、ユーザーまたはグループを動的に選択できます。 詳しくは、 [ユーザーへのワークフローの動的な割り当て](https://helpx.adobe.com/jp/experience-manager/kb/HowToAssignAWorkflowDynamicallyToParticipants.html) および [カスタムのAdobe Experience Manager動的参加者ステップの作成](https://experienceleague.adobe.com/docs/experience-manager-learn/getting-started-wknd-tutorial-develop/overview.html?lang=ja&amp;CID=RedirectAEMCommunityKautuk)

* **参加者：**&#x200B;このフィールドは、「参加者選択」フィールドで「**[!UICONTROL com.adobe.granite.workflow.core.process.RandomParticipantChooser]**」オプションが選択されている場合に使用できます。このフィールドでは、「RandomParticipantChooser」オプションのユーザーまたはグループを選択できます。

* **引数：**&#x200B;このフィールドは、「参加者選択」フィールドで RandomParticipantChoose スクリプト以外のスクリプトが選択されている場合に使用できます。このフィールドでは、「参加者選択」フィールドで選択したスクリプトに渡すコンマ区切りの引数のリストを指定できます。

* **ユーザーまたはグループ：**&#x200B;選択したユーザーまたはグループにタスクが割り当てられます。このオプションは、「割り当てオプション」フィールドで「**特定のユーザーまたはグループに割り当て**」オプションを選択した場合に使用できます。このフィールドには、ワークフローユーザーグループのすべてのユーザーとグループが一覧表示されます。

* **担当者に電子メールで通知：** 電子メール通知を担当者に送信するには、このオプションを選択します。 タスクがユーザーに割り当てられると、これらの通知が送信されます。 このオプションを使用する前に、AEM Web コンソールから通知を有効にします。 詳細な手順については、 [タスクの割り当て手順の電子メール通知の設定](/help/forms/using/aem-forms-workflow.md)

* **HTML メールテンプレート**： 通知メールのメールテンプレートを選択します。テンプレートを編集するには、crx リポジトリの /libs/fd/dashboard/templates/email/htmlEmailTemplate.txt にあるファイルを変更します。
* **委任先：** AEM Inbox には、割り当てられたワークフローを別のユーザーに委任する、ログインしたユーザーに対するオプションが用意されています。 同じグループ内または別のグループのワークフローユーザーに委任できます。 タスクが 1 人のユーザーに割り当てられ、 **担当者グループのメンバーへの委任を許可** オプションが選択されている場合は、タスクを別のユーザーまたはグループに委任できません。

* **デフォルトのアクション：** 初期設定では、送信、保存、リセットの各アクションを使用できます。 すべてのアクションは、デフォルトで有効になっています。
* **ルート変数：** ルート変数の名前。 ユーザーが AEM インボックスで選択したカスタムアクションは、ルート変数で取得します。
* **ルート：** 1 つのタスクを別々のルートに分岐させることができます。 AEM インボックスで選択すると、ルートから値が返され、選択したルートに基づいてワークフローが分岐します。
* **タイトル**：ルートのタイトルを指定します。これはAEMインボックスに表示されます。
* **Coral アイコン**:Coral アイコンのHTML属性を指定します。 Adobe CoralUI ライブラリでは、多数のタッチファーストなアイコンを提供します。ルートのアイコンを選択して使用できます。 アイコンは、タイトルと共に AEM インボックスに表示されます。
* **担当者がコメントを追加することを許可**： タスクのコメントを有効にするには、このオプションを選択します。担当者は、タスクの送信時に AEM インボックス内からコメントを追加できます。
* **担当者が添付ファイルをタスクに追加することを許可**:タスクの添付ファイルを有効にする場合は、このオプションを選択します。 担当者は、タスクの送信時に AEM インボックス内から添付ファイルを追加できます。
* **タスクの添付ファイルの出力パス**:添付フォルダーの場所を指定します。 場所は、ペイロードを基準とした相対位置です。
* **カスタムメタデータを使用：** カスタムメタデータフィールドを有効にするには、このオプションを選択します。 カスタムメタデータは、メールのテンプレートで使用します。
* **カスタムメタデータ：**&#x200B;メールテンプレートのカスタムメタデータを選択します。カスタムメタデータは、crx リポジトリの apps/fd/dashboard/scripts/metadataScripts にあります。指定されたパスは crx リポジトリに存在しません。管理者は、パスを使用する前に作成します。 また、カスタムメタデータ用のサービスを使用することもできます。 さらに、`WorkitemUserMetadataService` インターフェイスを拡張してカスタムメタデータを提供することもできます。

* **前の手順のデータを表示**：このオプションを選択すると、以前の担当者、タスクに対して既に実行されたアクション、タスクに追加されたコメント、完了したタスクのレコードのドキュメントがある場合、担当者がそれらを表示できるようになります。
* **以降の手順のデータを表示する：**&#x200B;このオプションを選択すると、後続の担当者が実行したアクションと追加したコメントを、現在の担当者が表示できるようになります。また、現在の担当者が、完了したタスクのレコードのドキュメント（ある場合）を表示することもできます。
* **データタイプの表示：** デフォルトでは、担当者はレコードのドキュメント、担当者、実行されたアクション、および前後の担当者が追加したコメントを表示できます。 「データタイプの表示」オプションを使用すると、担当者に表示されるデータタイプを制限できます。

## 「メールを送信」ステップ {#send-email-step}

電子メールステップを使用して、電子メールを送信します。例えば、レコードのドキュメントを含む電子メール、アダプティブフォームのリンク、インタラクティブPDFのリンク、添付通信のドキュメントなどです。 メールの送信ステップのサポート [HTMLE メール](https://en.wikipedia.org/wiki/HTML_email). HTMLE メールはレスポンシブで、受信者の E メールクライアントや画面のサイズに応じて調整されます。 HTML メールテンプレートを使用すると、メールの外観、カラースキーム、動作を定義することができます。

メール手順では、Day CQ Mail Service を使用してメールを送信します。電子メールステップを使用する前に、 [電子メールサービス](/help/forms/using/aem-forms-workflow.md) が設定されている。 メール手順には、次のプロパティがあります。

**タイトル：** ステップのタイトルは、ワークフローエディターでステップを識別するのに役立ちます。

**説明：**&#x200B;説明は、共通の開発環境で作業する他のプロセス開発者にとって有用です。

**メールの件名：** 件名は、ワークフローメタデータから取得することも、手動で指定することもできます。 を選択します。 **リテラル** 件名を手動で指定するか、 **ワークフローメタデータから取得** オプションを使用して、メタデータプロパティから件名を取得できます。

**HTMLメールテンプレート**:E メールのHTMLテンプレート。 変数は、E メールテンプレートで指定できます。 メールステップは、入力のため、テンプレートに含まれるすべての変数を抽出して表示します。

**メールテンプレートメタデータ**：メールテンプレートの変数の値は、ユーザー指定の値、オーサーサーバーまたはパブリッシュサーバー上のアセットのパス、画像、ワークフローメタデータプロパティのいずれにもすることができます。

* **リテラル：**&#x200B;このオプションは、指定する値が正確に分かっている場合に使用します。例えば、[example@example.com](mailto:example@example.com) と指定します。

* **ワークフローメタデータ：** 使用する値がワークフローのメタデータプロパティに保存されている場合は、このオプションを使用します。 オプションを選択した後、「ワークフローメタデータ」オプションの下にある空のテキストボックスに、メタデータプロパティ名を入力します。 例えば、emailAddress と指定します。
* **アセット URL：**&#x200B;インタラクティブ通信の web リンクをメールに埋め込むには、このオプションを使用します。このオプションを選択したら、埋め込むインタラクティブ通信を参照して選択します。アセットは、オーサーまたはパブリッシュサーバー上に配置できます。
* **画像：** 画像を電子メールに埋め込むには、「 」オプションを使用します。 このオプションを選択したら、画像を参照して選択します。「画像」オプションは、E メールテンプレートで使用できる画像タグ (&lt;img src=&quot;&amp;ast;&quot; />) に対してのみ使用できます。

**送信者/受信者の電子メールアドレス：** を選択します。 **リテラル** 電子メールアドレスを手動で指定するか、 **ワークフローメタデータから取得** オプションを使用して、メタデータプロパティから電子メールアドレスを取得できます。 「**ワークフローメタデータから取得**」オプションのメタデータプロパティ配列のリストを指定することもできます。

**添付ファイルのパス：** 指定した場所で使用可能なアセットが電子メールに添付されます。 アセットのパスは、ペイロードに対する相対パスまたは絶対パスのどちらでもかまいません。一例として、[Payload_Directory]/attachments/ というパスを指定します。

**ファイル名：**&#x200B;メール添付ファイルの名前です。メールステップは、添付ファイルの元のファイル名を指定されたファイル名に変更します。この名前は、手動で指定することも、ワークフローメタデータプロパティから取得することもできます。 指定する値が正確に分かっている場合は、「**リテラル**」オプションを使用します。使用する値がワークフローメタデータプロパティに保存されている場合は、「**ワークフローメタデータから取得**」オプションを使用します。

## レコードのドキュメントを生成ステップ {#generate-document-of-record-step}

フォームの入力時または送信時には、そのフォームを印刷物またはドキュメント形式で記録しておくことができます。これは、レコードのドキュメント (DoR) と呼ばれます。 レコードのドキュメントを生成の手順を使用して、アダプティブフォームの読み取り専用バージョンまたはインタラクティブPDFバージョンを作成できます。 PDFバージョンには、アダプティブフォームのレイアウトと共にフォームに入力された情報が含まれています。

レコードのドキュメントステップには、次のプロパティがあります。

**アダプティブフォームを使用：**&#x200B;入力するアダプティブフォームを検索する方法を指定します。アダプティブフォームは、絶対パスで使用できる場合、ワークフローへのペイロードとして送信される場合、または変数を使用して計算されたパスで使用できる場合に使用できます。 パスを指定するには、String 型の変数を使用します。

**アダプティブフォームのパス**：アダプティブフォームのパスを指定します。このフィールドは、「タイプ」フィールドのアダプティブフォームまたは読み取り専用アダプティブフォームオプションを、「アダプティブフォームを使用」フィールドの絶対パスオプションと組み合わせて使用すると使用できます。

**入力データのパス：** アダプティブフォームの入力データのパス。 データは、ペイロードを基準とした相対位置に保持することも、データの絶対パスを指定することもできます。 入力データは、レコードのドキュメントを作成するためにアダプティブフォームとマージされます。

**入力添付ファイルのパス：** 入力添付ファイルのパス：添付ファイルのパス。 これらの添付ファイルは「レコードのドキュメント」に含まれます。添付ファイルは、ペイロードを基準とした相対的な場所に保持することも、添付ファイルの絶対パスを指定することもできます。

フォルダーのパス（例えば、添付ファイル）を指定した場合、そのフォルダー内で直接使用可能なすべてのファイルがレコードのドキュメントに添付されます。 指定した添付ファイルパスで直接使用可能なフォルダ内にファイルが存在する場合、そのファイルは添付ファイルとしてレコードのドキュメントに含まれます。 直接存在するフォルダー内にフォルダーがある場合、それらはスキップされます。

**生成されたレコードのドキュメントのパス：** レコードのドキュメントファイルを保持する場所を指定します。 ペイロードフォルダーを上書きするか、レコードのドキュメントをペイロードディレクトリ内の場所に配置するかを選択できます。

**ロケール**：レコードのドキュメントの言語を指定します。

## フォームデータモデルサービスを呼び出しステップ {#invoke-form-data-model-service-step}

[AEM Forms のデータ統合](/help/forms/using/data-integration.md)機能により、複数の異なるデータソースを設定して接続することができます。これらのデータソースは、データベース、Web サービス、REST サービス、OData サービス、CRM ソリューションにすることができます。 AEM Formsデータ統合を使用すると、様々なサービスを含むフォームデータモデルを作成して、設定されたデータベースに対してデータの取得、追加、更新の操作を実行できます。 **データモデルサービスの呼び出し手順**&#x200B;を使用して、フォームデータモデル（FDM）を選択し、FDM のサービスを使用すると、各種データソースの取得、更新、追加を行うことができます。

手順のフィールドの入力を説明するために、次のデータベーステーブルと JSON ファイルを例として使用します。

**CustomerDetails テーブルの例**

<table> 
 <tbody> 
  <tr> 
   <td>プロパティ</td> 
   <td>値<br /> </td> 
  </tr> 
  <tr> 
   <td>名<br /> </td> 
   <td>Sarah<br /> </td> 
  </tr> 
  <tr> 
   <td>姓</td> 
   <td>ローズ</td> 
  </tr> 
  <tr> 
   <td>顧客 ID</td> 
   <td>1</td> 
  </tr> 
  <tr> 
   <td>メールアドレス<br /> </td> 
   <td>srose@we.info</td> 
  </tr> 
 </tbody> 
</table>

**サンプル JSON ファイル**

```
{ 
  customer: { 
   firstName: "Sarah", 
   lastName:"Rose", 
   customerId: "1", 
   emailAddress:"srose@we.info" 
 }, 
  insurance: {
   customerId: "1", 
  policyType: "Premium,
  policyNumber: "Premium-521499",
  customerDetails: { 
   firstName: "Sarah",
   lastName: "Rose",
   customerId: "1",
   emailAddress: "srose@we.info" 
  }
 }
}
```

フォームデータモデルサービスを呼び出しステップには、以下に一覧されたフィールドがあり、フォームデータモデルの操作に役立ちます。

* **タイトル：** ステップのタイトル。 ワークフローエディターでステップを識別するのに役立ちます。
* **説明：**&#x200B;説明は、共通の開発環境で作業する他のプロセス開発者にとって有用です。

* **フォームデータモデルのパス：**&#x200B;サーバー上のフォームデータモデルを参照して選択します。

* **サービス：**&#x200B;選択したフォームデータモデルのサービスのリストです。
* **サービスの入力/リテラル、ワークフローメタデータ、JSON ファイルを使用して入力データを指定**:1 つのサービスに複数の引数を指定できます。 ワークフローのメタデータプロパティ、JSON オブジェクトからサービス引数の値を取得するには、このオプションを選択するか、提供されたテキストボックスに値を直接入力します。

   * **リテラル：**&#x200B;指定する値が正確に分かっている場合は、このオプションを使用します。例えば、srose@we.info と指定します。
   * **ワークフローメタデータから取得：** 使用する値がワークフローのメタデータプロパティに保存されている場合は、このオプションを使用します。 例えば、emailAddress と指定します。
   * **JSON ドット表記法：**&#x200B;使用する値が JSON ファイル内にある場合は、このオプションを使用します。例えば、 insurance.customerDetails.emailAddress.JSON ドット表記法オプションは、「入力 JSON からのマップ入力フィールド」オプションが選択されている場合にのみ使用できます。
   * **入力 JSON からのマップ入力フィールド：** JSON ファイルのパスを指定して、その JSON ファイルから一部のサービスの引数の入力値を取得します。JSON ファイルのパスは、ペイロードに対する相対パスまたは絶対パスのどちらでもかまいません。

* **サービスの入力/JSON ファイルを使用して入力データを指定：** JSON ファイルからすべての引数の値を取得するには、このオプションを選択します。
* **JSON ファイルのパスを入力**:すべてのサービス引数の値を含む JSON ファイルのパス。 JSON ファイルのパスは、**ペイロードに対する相対パス**&#x200B;または&#x200B;**絶対パス**&#x200B;のどちらでもかまいません。

* **JSON ドット表記：** 指定した JSON ファイルのすべてのオブジェクトをサービス引数の入力として使用する場合は、このフィールドを空白のままにします。 指定した JSON ファイルからサービス引数の入力として特定の JSON オブジェクトを読み取るには、JSON オブジェクトにドット表記法を指定します。例えば、この節の冒頭に一覧表示されている JSON に似た JSON を使用している場合は、insurance.customerDetails を指定して、顧客のすべての詳細をサービスへの入力として提供します。
* **サービスの出力/マップし、出力値をメタデータに書き込みます。** このオプションを選択して、crx-repository のワークフローインスタンスメタデータノードのプロパティとして出力値を保存します。 メタデータプロパティの名前を指定し、メタデータプロパティにマップされる対応するサービス出力属性を選択します。例えば、出力サービスが返す phone_number をワークフローメタデータの phone_number プロパティでマッピングします。
* **サービスの出力/出力を JSON 形式で保存：** 出力値を JSON ファイルに保存するには、「 」オプションを選択します。
* **出力 JSON ファイルのパス：** 出力 JSON ファイルを保存するためのパス。 出力 JSON ファイルのパスは、ペイロードに対する相対パスまたは絶対パスのどちらでもかまいません。

## ドキュメントに署名ステップ {#sign-document-step}

ドキュメントに署名ステップを使用すると、Acrobat Signを使用してドキュメントに署名できます。 ドキュメントへの署名手順には、次のプロパティがあります。

* **契約名：**&#x200B;契約のタイトルを指定します。契約名は、署名者に送信されるメールの件名と本文の一部として使用されます。
* **ロケール：**&#x200B;メールと検証オプションの言語を指定します。
* **Acrobat Sign Cloud Configuration**:Acrobat Signクラウド設定を選択します。 Acrobat SignをAEM Forms用に設定していない場合は、 [Acrobat SignとAEM Formsの統合](/help/forms/using/adobe-sign-integration-adaptive-forms.md).

* **署名するドキュメント：** ペイロードを基準とした場所からドキュメントを選択したり、ペイロードをドキュメントとして使用したり、ドキュメントの絶対パスを指定したりできます。
* **入力添付ファイルのパス：** 添付ファイルを選択します。 これらの添付ファイルは、署名ドキュメントに含まれます。 添付ファイルは、ペイロードを基準とした相対的な場所に保持することも、添付ファイルの絶対パスを指定することもできます。

   フォルダーのパス（例えば、添付ファイル）を指定した場合、そのフォルダー内で直接使用可能なすべてのファイルがレコードのドキュメントに添付されます。 指定された添付ファイルパスに直接存在するフォルダー内に使用できるファイルがある場合、そのファイルは署名ドキュメントに添付ファイルとして含まれます。直接存在するフォルダー内にフォルダーがある場合、それらはスキップされます。
* **期限までの日数：**「**期限までの日数**」フィールドに指定された日数の間にタスクのアクティビティがない場合、ドキュメントは期限切れとマークされます。日数は、ドキュメントが署名のためにユーザーに割り当てられた後にカウントされます。

* **リマインダーメールの頻度：**&#x200B;リマインダーメールを日単位または週単位で送信できます。週のカウントは、ドキュメントが署名のためにユーザーに割り当てられた日から始まります。
* **署名プロセス：** ドキュメントに連続または並列の順序で署名するよう選択できます。 順次署名する場合、ドキュメントは署名のために一度に 1 人の署名者に送信されます。最初の署名者がドキュメントの署名を完了した後、ドキュメントは 2 番目の署名者に送信されます。 並列で署名する場合、複数の署名者が同時に 1 つのドキュメントに署名することができます。

* **リダイレクト URL :** リダイレクト URL を指定します。 ドキュメントに署名した後、担当者を URL にリダイレクトできます。 通常、この URL には「ありがとうございます」というメッセージやその他の手順が含まれています。
* **ワークフローステージ：** 1 つのワークフローに複数のステージを含めることができます。これらのステージは、AEM インボックスに表示されます。これらのステージは、モデルのプロパティ（サイドキック／ページ／ページのプロパティ／ステージ）で定義できます。
* **署名者を選択：**&#x200B;ドキュメントの署名者を選択する方法を指定します。ワークフローを動的にユーザーまたはグループに割り当てることも、手動で署名者の詳細を追加することもできます。
* **署名者を選択するスクリプトまたはサービス：** このオプションは、「署名者を選択」フィールドで「動的」オプションが選択されている場合にのみ使用できます。 ECMAScript またはサービスを指定して、ドキュメントの署名者と検証オプションを選択することができます。

* **署名者の詳細：**&#x200B;このオプションを使用できるのは、「署名者を選択」フィールドで「手動」オプションが選択されている場合のみです。メールアドレスを指定し、オプションの検証メカニズムを選択します。2 段階の検証メカニズムを選択する前に、設定済みのAcrobat Signアカウントに対して、対応する検証オプションが有効になっていることを確認します。
* **ステータス変数：** Acrobat Sign対応のドキュメントでは、ドキュメントの署名ステータスが変数に格納されます。 ステータス変数の名前（adobeSignStatus）を指定します。インスタンスのステータス変数は、変数のステータスが格納されている CRXDE の /etc/workflow/instances/&lt;server>/&lt;date-time>/&lt;instance of workflow model>/workItems/&lt;node>/metaData から利用できます。
* **署名済みドキュメントのパス：** 署名済みドキュメントを保持する場所を指定します。 ペイロードファイルを上書きするか、ペイロードディレクトリ内の場所に署名済みドキュメントを配置するかを選択できます。

## ドキュメントサービスの手順 {#document-services-steps}

AEM Document Services は、PDFドキュメントを作成、組み立て、および保護するための一連のサービスです。 AEM Formsには、各ドキュメントサービスに対して個別のAEM Workflow ステップが用意されています。

### ドキュメントタイムスタンプの適用ステップ {#apply-document-time-stamp-step}

ドキュメントにタイムスタンプを追加します。 ドキュメントの詳細（入力ドキュメントのパス、入力ドキュメント名、書き出されたデータを保存する場所など）を指定します。 既存のペイロードファイルを上書きするか、別のファイル名を選択して、ペイロードフォルダーの下にある別のファイルにデータを保存することもできます。

### 画像に変換ステップ {#convert-to-image-step}

PDFドキュメントを画像ファイルに変換します。 サポートされている画像形式は、JPEG、JPEG2000、PNG および TIFF です。次の情報は、画像画像への変換に適用されるTIFFです。

* 複数ページのTIFFファイルが生成されます。
* 一部の注釈は、注釈画像に含まれません。TIFF 外観の生成にAcrobatが必要な注釈は含まれません。

### PDF/A に変換ステップ {#convert-to-pdf-a-step}

指定したオプションを使用して PDF ドキュメントを PDF/A 形式に変換します。PDF/A バージョンの Portable Document Format（PDF）は、ドキュメントのアーカイブおよび長期保存に特化しています。

### PS に変換ステップ {#convert-to-ps-step}

PDF ドキュメントを PostScript に変換します。PostScript に変換する場合は、変換操作を使用して、変換元のドキュメントと、PostScript レベル 2 または 3 のどちらに変換するかを指定できます。 PostScript ファイルに変換するPDFドキュメントは、非インタラクティブである必要があります。

### 指定したタイプのステップからPDFを作成 {#create-pdf-from-specified-type-step}

入力ファイルから PDF ドキュメントを生成します。入力ドキュメントは、ペイロードに対する相対パス、絶対パス、ペイロード自体のいずれかを指定できます。

### URL/HTML/ZIP ステップからPDFを作成 {#create-pdf-from-url-html-zip-step}

指定された URL、PDF、ZIP ファイルからHTMLドキュメントを生成します。

### データの書き出し手順 {#export-data-step}

PDF formsまたは XDP ファイルからデータを書き出します。 入力ドキュメントのファイルパスと Export Data Format を入力する必要があります。 「Export Data Format」のオプションは、Auto、XDP および XmlData です。

### Export PDFを指定したタイプステップに {#export-pdf-to-specified-type-step}

PDFドキュメントを選択した形式に変換します。

### 非インタラクティブPDFの生成手順 {#generate-non-interactive-pdf-step}

非インタラクティブ PDF を生成します。様々なカスタマイズオプションが用意されています。

### データのインポート手順 {#import-data-step}

フォームデータをPDFフォームに結合します。 フォームデータは、フォームフォームにPDFできます。

### DDX を呼び出しステップ {#invoke-ddx-step}

入力ドキュメントの指定されたマップ上で DDX ファイルを実行し、操作された PDF ドキュメントを返します。

### Optimize PDF手順 {#optimize-pdf-step}

PDFファイルのサイズを縮小して最適化します。 この変換の結果、PDFファイルは元のバージョンよりも小さくなる場合があります。 また、この操作では、PDF ドキュメントが最適化パラメーターで指定された PDF バージョンに変換されます。

最適化設定では、ファイルの最適化方法を指定します。 次に設定例を示します。

* ターゲットPDFのバージョン
* JavaScript アクションや埋め込みページのサムネールなどのオブジェクトの破棄
* コメントや添付ファイルなどのユーザーデータの破棄
* 無効または未使用の設定の破棄
* 非圧縮データの圧縮、またはより効率的な圧縮アルゴリズムの使用
* 埋め込みフォントの削除
* 透明度の値を設定する

### レンダリングPDFフォームステップ {#render-pdf-form-step}

フォームデザイナー（XDP）で作成したフォームを PDF フォームにレンダリングします。

### ドキュメントの保護ステップ {#secure-document-step}

ドキュメントを暗号化、署名、および認証します。 AEM Formsは、パスワードベースの暗号化と証明書ベースの暗号化の両方をサポートしています。 また、ドキュメントに署名するための様々なアルゴリズムの中から選択することもできます。 例えば、SHA-256 や SH-512 などです。 ワークフローステップを使用して、拡張ワークフロードキュメントを読み取ることもPDFできます。 このワークフローステップには、バーコードのデコード、デジタル署名、PDF データの読み込みと書き出しなどのオプションを有効にするためのオプションが用意されています。

### プリンタに送信ステップ {#send-to-printer-step}

ドキュメントを直接プリンターに送信します。 次の印刷アクセスメカニズムをサポートしています。

* **直接アクセス可能なプリンター**:同じコンピュータにインストールされているプリンタは、直接アクセス可能なプリンタと呼ばれ、そのコンピュータはプリンタホストと呼ばれます。 この種類のプリンターは、コンピューターに直接接続されているローカルプリンターでもかまいません。
* **間接アクセス型プリンター**:プリントサーバーにインストールされているプリンタは、他のコンピュータからアクセスされます。 ネットワークプリンタに接続するには、共通の UNIX®印刷システム (CUPS) や Line Printer Daemon(LPD) プロトコルなどのテクノロジーを使用できます。 間接アクセス型プリンタにアクセスするには、プリントサーバーの IP またはホスト名を指定します。 このメカニズムを使用すると、ネットワークで LPD が実行されている場合に、ドキュメントを LPD URI に送信できます。 このメカニズムを使用すると、LPD が実行されているネットワークに接続されているすべてのプリンタにドキュメントをルーティングできます。
