---
title: コンテンツフラグメントの操作
seo-title: Working with Content Fragments
description: コンテンツフラグメントを使用して、ページに依存しないコンテンツの設計、作成、キュレーション、使用をおこなう方法について説明します。
seo-description: Learn how Content Fragments allow you to design, create, curate and use page-independent content.
uuid: aa5acda2-4c20-4fe7-929d-6c065b252cf2
contentOwner: AEM Docs
topic-tags: content-fragments
products: SG_EXPERIENCEMANAGER/6.4/ASSETS
content-type: reference
discoiquuid: 22ae0d3a-083f-40e4-bf4a-7a755ae9e312
exl-id: e2804707-7b75-4fae-937e-9e258481878f
feature: Content Fragments
role: User
source-git-commit: c5b816d74c6f02f85476d16868844f39b4c47996
workflow-type: tm+mt
source-wordcount: '2020'
ht-degree: 52%

---

# コンテンツフラグメントの操作 {#working-with-content-fragments}

>[!CAUTION]
>
>AEM 6.4 の拡張サポートは終了し、このドキュメントは更新されなくなりました。 詳細は、 [技術サポート期間](https://helpx.adobe.com/jp/support/programs/eol-matrix.html). サポートされているバージョンを見つける [ここ](https://experienceleague.adobe.com/docs/?lang=ja).

>[!CAUTION]
>
>一部のコンテンツフラグメント機能には、 [AEM 6.4 Service Pack 2(6.4.2.0) 以降](/help/release-notes/sp-release-notes.md).

Adobe Experience Manager(AEM) コンテンツフラグメントを使用すると、 [ページに依存しないコンテンツを公開](/help/sites-authoring/content-fragments.md). 複数の場所、複数のチャネル上で使用可能なコンテンツを用意できるようになります。

コンテンツフラグメントは、AEMコアコンポーネントの Sling Model(JSON) 書き出し機能を使用して、JSON 形式で配信することもできます。 この形式の配信：

* を使用すると、コンポーネントを使用して、フラグメントの配信する要素を管理できます
* API 配信に使用するページに複数のコンテンツフラグメントコアコンポーネントを追加して一括配信を許可します。

以降のページでは、次のような、コンテンツフラグメントを作成、構成、管理するためのタスクについて説明します。

* [コンテンツフラグメントの管理](content-fragments-managing.md) - コンテンツフラグメントを作成し、編集、公開、参照します。

* [コンテンツフラグメントモデル](content-fragments-models.md) - モデルを有効化、作成および定義します。

* [バリエーション - フラグメントコンテンツのオーサリング](content-fragments-variations.md) - フラグメントコンテンツをオーサリングし、マスターのバリエーションを作成します。

* [Markdown](content-fragments-markdown.md) - フラグメントに Markdown 構文を使用します。

* [関連コンテンツの使用](content-fragments-assoc-content.md) - 関連コンテンツを追加します。

* [メタデータ - フラグメントのプロパティ](content-fragments-metadata.md) - フラグメントのプロパティを表示および編集します。

>[!NOTE]
>
>以降のページは、[コンテンツフラグメントを使用したページのオーサリング](/help/sites-authoring/content-fragments.md)と合わせてお読みください。

通信チャネルの数は年々増加しています。通常、チャネルとは配信メカニズムのことであり、次のどちらも指します。

* 物理チャネル例：デスクトップ、モバイル
* 物理チャネルでの配信方法（デスクトップ用の「製品詳細ページ」や「製品カテゴリページ」、モバイル用の「モバイル Web」や「モバイルアプリ」など）

ただし、すべてのチャネルで同じコンテンツを使用するのは（おそらく）望ましくないでしょう。特定のチャネルに従ってコンテンツを最適化する必要があります。

コンテンツフラグメントを使用すると、次のことができます。

* 複数のチャネルをまたいで、ターゲットオーディエンスに効率的にリーチする方法を検討します。
* チャネルに依存しない編集コンテンツを作成および管理します。
* 様々なチャネル用のコンテンツプールを構築します。
* 特定のチャネル用にコンテンツのバリエーションをデザインする。
* アセット（混在メディアフラグメント）を挿入して、テキストに画像を追加します。

さらにこうしたコンテンツフラグメントを集めて組み立てることで、多様なチャネルにエクスペリエンスを提供できます。

## コンテンツフラグメントとコンテンツサービス {#content-fragments-and-content-services}

AEM Content Services は、AEMでのコンテンツの説明と配信を、Web ページに焦点を当てるだけでなく、一般化するように設計されています。

従来のAEM Web ページではないチャネルに対して、あらゆるクライアントが利用できる標準化された方法を使用してコンテンツを配信します。 次のチャネルが含まれます。

* 単一ページアプリケーション
* ネイティブモバイルアプリケーション
* AEM の外部の他のチャネルおよびタッチポイント

配信は JSON 形式でおこなわれます。

AEMコンテンツフラグメントを使用して、構造化コンテンツを説明し、管理できます。 構造化コンテンツは、様々なコンテンツタイプを含むことができるモデルで定義されます。テキスト、数値データ、ブール値、日付と時刻などを含みます。

AEM コアコンポーネントの JSON 書き出し機能と共にこの構造化コンテンツを使用して、AEM コンテンツを AEM ページ以外のチャネルに配信できます。

>[!NOTE]
>
>**コンテンツフラグメント**&#x200B;と&#x200B;**[エクスペリエンスフラグメント](/help/sites-authoring/experience-fragments.md)**&#x200B;は、AEM 内の異なる機能です。
>
>* **コンテンツフラグメント** は編集コンテンツで、主にテキストと関連する画像です。 これらは、デザインやレイアウトを含まない純粋なコンテンツです。
>* **エクスペリエンスフラグメント**&#x200B;は完全にレイアウトされたコンテンツであり、web ページのフラグメントです。
>
>エクスペリエンスフラグメントには、コンテンツフラグメントの形式でコンテンツを含めることができますが、その逆はできません。
>
>詳しくは、 [AEMのコンテンツフラグメントとエクスペリエンスフラグメントについて](https://helpx.adobe.com/jp/experience-manager/kt/platform-repository/using/content-fragments-experience-fragments-article-understand.html).

>[!CAUTION]
>
>コンテンツフラグメントは、クラシック UI では使用できません。
>
>コンテンツフラグメントコンポーネントは、クラシック UI のサイドキックに表示されますが、その他の機能は使用できません。

>[!NOTE]
>
>AEM はフラグメントコンテンツの翻訳もサポートしています。詳しくは、 [コンテンツフラグメントの翻訳プロジェクトの作成](creating-translation-projects-for-content-fragments.md) を参照してください。

## コンテンツフラグメントのタイプ {#types-of-content-fragment}

コンテンツフラグメントは次のどちらかになります。

* 単純なフラグメント

   * これらには事前定義された構造はありません。テキストと画像のみが含まれています。
   * これらは単純なフラグメントテンプレートに基づいています。

* 構造化コンテンツが含まれるフラグメント

   * 作成されるフラグメントの構造を事前定義する[コンテンツフラグメントモデル](content-fragments-models.md)に基づいています。
   * JSON エクスポーターを使用したコンテンツサービスの実現にも使用できます。

## コンテンツタイプ {#content-type}

コンテンツフラグメントは次のとおりです。

* **Assets** として格納されます。

   * コンテンツフラグメント（とバリエーション）は、**Assets** コンソールで作成および管理できます。
   * コンテンツフラグメントエディターでオーサリングおよび編集されます。

* [コンテンツフラグメントコンポーネント（参照コンポーネント）を介してページエディター内で](/help/sites-authoring/content-fragments.md)使用されます。

   * **コンテンツフラグメント**&#x200B;コンポーネントを使用できるのはページの作成者です。作成者は、コンテンツフラグメントコンポーネントを使用して、必要なコンテンツフラグメントを HTML または JSON 形式で参照し、配信できます。

コンテンツフラグメントは、次のようなコンテンツ構造です。

* レイアウトやデザインがありません（リッチテキストモードでは、一部のテキスト書式が可能です）。
* 1 つ以上の [構成部品](#constituent-parts-of-a-content-fragment).
* 可能 [画像を含む、または、画像に接続する](#fragments-with-visual-assets).
* ページで参照される場合、[中間コンテンツ](#in-between-content-when-page-authoring-with-content-fragments)を使用できます。

* 配信メカニズム（ページやチャネル）に依存しません。

### ビジュアルアセットを含むフラグメント {#fragments-with-visual-assets}

作成者がより柔軟にコンテンツをコントロールできるように、画像をコンテンツフラグメントに追加したり、コンテンツフラグメントと統合したりできます。

アセットとコンテンツフラグメントの組み合わせには、様々な使用法があります。どの方法にもそれぞれの利点があります。

* フラグメントに&#x200B;**アセットを挿入**（混在メディアフラグメント）

   * フラグメントの不可欠な部分です ( [コンテンツフラグメントの構成要素](#constituent-parts-of-a-content-fragment)) をクリックします。
   * アセットの位置を定義します。
   * 詳しくは、 [フラグメントへのアセットの挿入](content-fragments-variations.md#inserting-assets-into-your-fragment) （フラグメントエディター）を参照してください。

   >[!NOTE]
   >
   >コンテンツフラグメント自体に挿入したビジュアルアセットは、前の段落に添付されます。このコンテンツフラグメントをページに追加した場合、ビジュアルアセットは、中間コンテンツが追加されたタイミングで前の段落との関連で移動します。

* **関連コンテンツ**

   * フラグメントに接続されている。ただし、フラグメントの固定部分ではありません ( [コンテンツフラグメントの構成要素](#constituent-parts-of-a-content-fragment)) をクリックします。
   * 位置決めを柔軟に行えます。
   * ページでフラグメントを使用する際に、（中間コンテンツのように）簡単に使用できます。
   * 詳しくは、 [関連コンテンツ](content-fragments-assoc-content.md) を参照してください。

* ページエディターの **Assets ブラウザー**&#x200B;で利用できるアセット

   * アセットを最大限に柔軟に選択できます。
   * 位置決めを柔軟に行えます。
   * 特定のフラグメントに対して承認されるという概念を提供しません。
   * 詳細については、[Assets ブラウザー](/help/sites-authoring/author-environment-tools.md#assets-browser)を参照してください。

### コンテンツフラグメントの構成要素 {#constituent-parts-of-a-content-fragment}

コンテンツフラグメントアセットは、次の部分（直接または間接的）で構成されます。

* **フラグメント要素**

   * 要素は、コンテンツを保持するデータフィールドに関連付けられます。
   * 構造化コンテンツを含むフラグメントの場合は、コンテンツモデルを使用してコンテンツフラグメントを作成します。 モデルで指定された要素（フィールド）は、フラグメントの構造を定義します。 これらの要素（フィールド）は、様々なデータタイプに対応しています。
   * 単純なフラグメントの場合：

      * コンテンツは、1 つ以上の複数行テキストフィールドまたは要素に含まれます。
      * 要素はフラグメントテンプレートで定義されます ( フラグメントのオーサリング時には定義できません。詳しくは、 [コンテンツフラグメントテンプレート](/help/sites-developing/content-fragment-templates.md)) をクリックします。

* **フラグメントの段落**

   * テキストのブロック。次のようなものです。

      * 縦方向のスペース（キャリッジリターン）で区切られます。
      * 複数行テキスト要素内にあります。単純なフラグメントまたは構造化フラグメント内にあります。
   * [リッチテキスト](content-fragments-variations.md#rich-text)モードと[ Markdown ](content-fragments-variations.md#markdown)モードでは、段落をヘッダーとして書式設定することができます。その場合、ヘッダーとその後の段落が 1 つのユニットになります。
   * ページオーサリング中にコンテンツを制御できるようにします。


* **フラグメントに挿入されたアセット（混在メディアフラグメント）**

   * アセット（画像）が実際のフラグメントに挿入され、フラグメントの内部コンテンツとして使用されます。
   * フラグメントの段落システムに埋め込まれます。
   * 書式設定は [フラグメントはページで使用または参照されます](/help/sites-authoring/content-fragments.md).
   * フラグメントへの追加、フラグメントからの削除、フラグメント内での移動は、フラグメントエディターのみで行えます。これらのアクションは、ページエディターでは行えません。
   * フラグメントへの追加、フラグメントからの削除、フラグメント内での移動は、[フラグメントエディターのみで、リッチテキストフォーマットを使用して](content-fragments-variations.md#inserting-assets-into-your-fragment)行えます。
   * 複数行テキスト要素（任意のフラグメントタイプ）にのみ追加できます。
   * 前のテキスト（段落）に添付されます。

   >[!CAUTION]
   >
   >プレーンテキスト形式に切り替えることで、（誤って）フラグメントから削除するおそれがあります。

   >[!NOTE]
   >
   >ページでフラグメントを使用する場合は、アセットを[追加の（中間）コンテンツ](/help/sites-authoring/content-fragments.md#using-associated-content)として追加することもできます。その場合は、関連コンテンツ、または Assets ブラウザー内のアセットを使用します。

* **関連コンテンツ**

   * これはフラグメントの外部のコンテンツですが、編集上の関連性を持ちます。 通常、画像、ビデオまたはその他のフラグメントです。
   * コレクション内の個々のアセットをページに追加する際に、ページエディターでフラグメントと共に使用できます。 つまり、特定のチャネルの要件に応じて、これらはオプションです。
   * アセットは、[コレクションを介してフラグメントに関連付け](content-fragments-assoc-content.md)ます。関連付けられたコレクションを使用することで、作成者は、ページ作成時に使用するアセットを決定できます。

      * コレクションは、テンプレートを介して、デフォルトコンテンツとして、またはフラグメントのオーサリング中に作成者がフラグメントに関連付けることができます。
      * [アセット (DAM) コレクション](managing-collections-touch-ui.md) は、フラグメントの関連コンテンツの基礎です。
   * オプションで、フラグメント自体をコレクションに追加して、追跡を容易にすることもできます。


* **フラグメントメタデータ**

   * 以下を使用： [アセットのメタデータスキーマ](metadata.md).
   * タグは、次のことを行うときに作成できます。

      * フラグメントの作成とオーサリング
      * 以降：

         * フラグメントを表示または編集する **プロパティ** コンソールから
         * を編集する **メタデータ** フラグメントエディターで

   >[!CAUTION]
   >
   >メタデータ処理プロファイルは、コンテンツフラグメントには適用されません。

* **マスター**

   * フラグメントの整数部

      * すべてのコンテンツフラグメントには 1 つのマスターのインスタンスがあります。
      * マスターは削除できません。
   * マスターには、フラグメントエディターの「**[バリエーション](content-fragments-variations.md)**」の下でアクセスできます。
   * マスター自体はバリエーションではありませんが、すべてのバリエーションの基礎となります。


* **バリエーション**

   * 編集目的に固有のフラグメントテキストのレンディション。チャネルに関連付けることができますが、必須ではありません。アドホックなローカル変更の場合にも使用できます。
   * **マスター**&#x200B;のコピーとして作成しますが、その後、必要に応じて編集できます。通常、バリエーション同士にはコンテンツの重複があります。
   * フラグメントのオーサリング中に定義できます。または、フラグメントテンプレートで事前定義できます。
   * コンテンツコピーの分散を避けるために、フラグメントに保存します。
   * バリエーションは [同期済み](content-fragments-variations.md#synchronizing-with-master) マスター(マスターコンテンツが更新された場合 )
   * [要約](content-fragments-variations.md#summarizing-text)することで、あらかじめ定義した長さにテキストをすばやく切り詰めることができます。
   * フラグメントエディターの「[バリエーション](content-fragments-variations.md)」タブにあります。

### コンテンツフラグメントを使用したページのオーサリング時の中間コンテンツ {#in-between-content-when-page-authoring-with-content-fragments}

中間コンテンツの特徴は次のとおりです。

* [コンテンツフラグメントを操作するときにページエディター](/help/sites-authoring/content-fragments.md)で使用できます。
* ページ上で使用または参照されたことのある[フラグメントのフローの中に追加する、追加のコンテンツです。](/help/sites-authoring/content-fragments.md#adding-in-between-content)
* 中間コンテンツは、1 つの要素のみが表示される任意のフラグメントに追加できます。
* 関連するコンテンツは、アセットやコンポーネントと同様に、適切なブラウザーから使用できます。

>[!CAUTION]
>
>中間コンテンツはページコンテンツです。 コンテンツフラグメントには保存されません。

### フラグメントを利用するための要件 {#required-by-fragments}

コンテンツフラグメントを作成、編集、使用するためには、次のものが必要です。

* **コンテンツモデル**

   * 次に該当 [有効にし、ツールを使用して作成](content-fragments-models.md).
   * 必須 [構造化フラグメントを作成](content-fragments-managing.md#creating-content-fragments).
   * フラグメントの構造（タイトル、コンテンツ要素、タグ定義）を定義します。
   * コンテンツモデル定義にはタイトルと 1 つのデータ要素が必要です。その他すべてはオプションです。モデルは、フラグメントとデフォルトコンテンツ（該当する場合）の最小範囲を定義します。 作成者は、フラグメントコンテンツのオーサリング時に、定義された構造を変更することはできません。

* **フラグメントのテンプレート**

   * 必須 [単純なフラグメントを作成する](content-fragments-managing.md#creating-content-fragments).
   * 通常 [プロジェクトの実装時に開発される](/help/sites-developing/content-fragment-templates.md);はオーサリング時に作成できません。
   * 単純なフラグメントの基本プロパティ（タイトル、テキスト要素の数、タグ定義）を定義します。
   * テンプレート定義にはタイトルと 1 つのテキスト要素が必要です。その他の設定はオプションです。 テンプレートは、フラグメントとデフォルトコンテンツ（該当する場合）の最小範囲を定義します。 作成者は後から、テンプレートに定義されている内容を超えてフラグメントを拡張できます。

* **コンテンツフラグメントコンポーネント**

   * フラグメントをHTMLや JSON 形式で配信するのに便利です。
   * 必須 [ページ上でフラグメントを参照する](/help/sites-authoring/content-fragments.md).
   * フラグメントのレイアウトと配信（チャネル）に対応します。
   * フラグメントは、レイアウトを定義し、一部またはすべての要素／バリエーションと関連するコンテンツを配信するために、1 つ以上の専用コンポーネントを必要とします。
   * 作成時にフラグメントをページにドラッグすると、必須コンポーネントが自動的に関連付けられます。

## 使用例 {#example-usage}

フラグメントと、その要素およびバリエーションを一緒に使用して、複数のチャネルに対応した一貫性のあるコンテンツを作成できます。フラグメントを設計するときは、何をどこで使用するかを考慮する必要があります。

### We.Retail サンプル {#we-retail-sample}

サンプルフラグメントは、次の場所で確認できます。

[http://localhost:4502/assets.html/content/dam/we-retail/jp/experiences/arctic-surfing-in-lofoten](http://localhost:4502/assets.html/content/dam/we-retail/jp/experiences/arctic-surfing-in-lofoten)
